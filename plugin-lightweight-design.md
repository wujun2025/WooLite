# WooLite - 轻量级WooCommerce管理插件设计方案

## 0. 插件命名说明

**WooLite** 这个名称结合了 "WooCommerce" 和 "Lite"（轻量级），直接传达了插件的核心价值：

- **Woo**: 代表 WooCommerce 平台
- **Lite**: 体现轻量级、简洁的设计理念

该名称简洁易记，准确表达了插件的定位：一个轻量级的 WooCommerce 管理工具。插件采用轻量级的 React 框架，确保快速加载和流畅的用户体验。

## 1. 概述

### 1.1 项目背景
WooLite 是一个专为 WooCommerce 电商平台设计的轻量级 Chrome 扩展插件，旨在提供简洁、高效的商品管理功能。该项目源于对现有复杂 ERP 系统的简化需求，专注于核心功能，去除冗余复杂性，为用户提供纯粹、免费的使用体验。

WooLite 采用轻量级的 React 框架和 Zustand 状态管理库，确保插件快速加载和流畅运行。插件主要使用最大化模式，提供更大的工作区域，方便用户进行商品管理和编辑操作。

WooLite 目前仅支持简单商品和外部商品的管理，以及轻量级的订单提醒功能。变体商品和组合商品功能将在后续版本中实现。

### 1.2 设计理念
- **轻量级**: 最小化依赖库，减少插件体积，提升运行性能
- **功能纯粹**: 只保留最实用的商品管理功能，避免功能冗余
- **完全免费**: 开源项目，无任何收费项目，社区驱动开发
- **简洁直观**: 简洁的用户界面，清晰明确的操作流程
- **自适应设计**: 支持不同屏幕尺寸和设备，提供一致的用户体验

### 1.3 轻量级特性总结
WooLite 相比于原有插件具有以下轻量级特性：

1. **组件精简**: 仅包含核心功能组件，去除冗余界面
2. **依赖库最小化**: 只使用必要的第三方库，避免过度依赖
3. **代码量优化**: 精简业务逻辑，去除复杂的状态管理
4. **构建产物小**: 通过 Tree Shaking 和代码分割减少最终包体积
5. **内存占用低**: 优化状态管理和组件渲染，降低内存消耗

### 1.3 核心功能
- 店铺绑定（支持 WordPress 应用程序密码和 WooCommerce API 两种认证方式，最多支持3个店铺）
- 简单商品和外部商品编辑（功能强大的编辑界面）
- 商品批量上下架（受店铺权限限制）
- 商品筛选和搜索
- 订单提醒（可开关的轻量级订单提醒机制，在图标上显示红点和订单数量）
- 主要使用最大化模式（提供更大的工作区域）
- 多语言支持（中文、繁体中文、英文）
- 自适应设计支持（适配不同屏幕尺寸和设备）
- 商品批量导入/导出（单次最多100个商品，符合WooCommerce REST API限制）

## 2. 技术架构

### 2.1 技术栈选择
遵循 KISS（Keep It Simple, Stupid）、YAGNI（You Aren't Gonna Need It）和单一职责原则，选择轻量级技术栈：

```
graph TD
    A[WooLite 插件] --> B[React 18]
    A --> C[TypeScript]
    A --> D[Zustand]
    A --> E[Vite]
    A --> F[Chrome Extension Manifest V3]
    
    B --> G[用户界面]
    C --> H[类型安全]
    D --> I[状态管理]
    E --> J[构建工具]
    F --> K[Chrome API]
```

选择 React 作为前端框架的原因：
1. **轻量级**: 相比于 Angular 或 Vue，React 核心库更小
2. **高性能**: 虚拟 DOM 提供优秀的渲染性能
3. **生态系统**: 丰富的组件库和工具支持
4. **学习曲线**: 相对平缓，开发效率高
5. **社区支持**: 庞大的开发者社区和文档资源
6. **自适应支持**: 强大的响应式设计和自适应布局能力

### 2.2 架构设计原则
1. **最小化部署原则**: 只包含必要的功能模块，避免过度工程化
2. **单一职责原则**: 每个组件和模块只负责一个功能领域
3. **无依赖原则**: 避免引入不必要的第三方库
4. **模块化设计**: 清晰的目录结构，便于维护和扩展
5. **主次分明**: 以最大化模式为主，弹窗模式为辅

### 2.3 目录结构
```
src/
├── components/         # React组件
│   ├── StoreManagement.tsx
│   ├── ProductManagement.tsx
│   └── ProductForm.tsx
├── services/          # API服务层
│   └── api.ts
├── store/             # 状态管理
│   └── index.ts
├── types/             # TypeScript类型定义
│   └── index.ts
├── utils/             # 工具函数
├── hooks/             # 自定义Hook
│   └── useTranslation.tsx
├── locales/          # 国际化语言包
│   ├── zh-CN.ts
│   ├── zh-TW.ts
│   ├── en-US.ts
│   └── index.ts
├── maximized/        # 主要工作页面
│   ├── index.html
│   ├── index.tsx
│   └── MaximizedApp.tsx
├── popup/            # 辅助页面
│   ├── index.html
│   ├── index.tsx
│   └── PopupApp.tsx
├── background/       # 后台脚本
│   └── index.ts
└── manifest.json     # Chrome扩展配置
```

## 3. 核心功能设计

### 3.0 核心组件设计

遵循单一职责原则，WooLite 将包含以下核心组件：

1. **MaximizedApp 组件** - 插件主入口，提供更大的工作区域
2. **PopupApp 组件** - 插件辅助入口，用于快速操作
3. **StoreManagement 组件** - 店铺管理界面，处理店铺的增删改查
4. **ProductManagement 组件** - 商品管理界面，处理商品列表展示和批量操作
5. **ProductForm 组件** - 商品编辑表单，提供强大的简单商品编辑功能
6. **OrderNotification 组件** - 订单提醒组件，提供轻量级订单通知功能
7. **状态管理模块** - 使用 Zustand 实现全局状态管理
8. **API 服务模块** - 封装所有与 WooCommerce REST API 的交互
9. **国际化模块** - 提供多语言支持

#### 3.0.1 状态管理设计
使用 Zustand 作为状态管理方案，具有以下优势：
- 轻量级，无额外依赖
- 简单易用的API
- 良好的TypeScript支持

全局状态包括：
- 店铺配置列表
- 当前激活的店铺
- 商品列表和选中商品
- 订单提醒状态（未读订单数量等）
- UI状态（加载状态、语言设置等）

#### 3.0.2 API服务设计
API服务模块封装所有与 WooCommerce REST API 的交互：
- 店铺连接测试
- 商品增删改查
- 图片上传（仅WordPress认证）
- 批量操作支持
- 订单数量查询（用于订单提醒）

采用单例模式设计，确保全局唯一实例，避免重复创建。

### 3.1 店铺管理模块

#### 3.1.1 功能描述
- 支持添加、编辑、删除店铺（最多支持3个店铺）
- 支持两种认证方式：WordPress 应用程序密码和 WooCommerce REST API
- 店铺连接测试功能
- 当前店铺状态管理
- 店铺数量限制提示：当用户尝试添加第4个店铺时，系统会显示提示信息，告知最多只能绑定3个店铺

#### 3.1.2 组件设计
**StoreManagement 组件** 是店铺管理的核心界面，采用简洁的卡片式布局展示所有已绑定的店铺。每个店铺卡片显示：
- 店铺名称和URL
- 认证方式（WordPress/ WooCommerce）
- 在线状态指示器
- 操作按钮（设为当前、编辑、删除、测试连接）

添加/编辑店铺时，根据选择的认证方式动态显示相应的认证信息输入字段。

**店铺数量限制机制**：
- 系统会监控已绑定的店铺数量
- 当用户尝试添加第4个店铺时，会显示明确的提示信息："最多只能绑定3个店铺，请删除不需要的店铺后再添加新店铺"
- 在添加店铺按钮旁边显示当前店铺数量和限制信息（例如："店铺数量：2/3"）

#### 3.1.2 认证方式限制
```
graph TD
    A[认证方式] --> B[WooCommerce API]
    A --> C[WordPress 应用密码]
    
    B --> D[支持简单商品和外部商品]
    B --> E[不支持图片上传]
    B --> F[不支持变体和组合商品]
    
    C --> G[支持简单商品和外部商品]
    C --> H[支持图片上传]
    C --> I[不支持变体和组合商品]
```

#### 3.1.3 数据结构
```typescript
interface StoreConfig {
  id: string
  name: string
  url: string
  authType: 'wordpress' | 'woocommerce'
  credentials: {
    username?: string           // WordPress用户名
    password?: string          // WordPress应用密码
    consumerKey?: string       // WooCommerce Consumer Key
    consumerSecret?: string    // WooCommerce Consumer Secret
  }
  isActive: boolean
}
```

### 3.2 商品管理模块

#### 3.2.1 功能描述
- 商品列表展示（支持分页）
- 商品搜索和筛选功能
- 商品批量操作（上下架、删除）
- 简单商品编辑功能（功能强大的编辑界面）
- 商品图片上传限制（防小白乱传）
- 商品批量导入/导出功能

#### 3.2.2 商品类型支持
根据轻量级设计原则，WooLite 插件将只支持以下商品类型：
- **简单商品** (Simple Products) - 完全支持
- **外部商品** (External Products) - 完全支持

对于变体商品和组合商品，将在商品类型选择器中显示但设置为禁用状态，并标注"待开发"。这些功能将在未来版本中实现。

#### 3.2.3 组件设计
**ProductManagement 组件** 负责商品列表的展示和操作，采用简洁的表格布局：
- 表格列包括：商品名称、SKU、价格、库存状态、商品类型、操作按钮
- 顶部搜索栏支持按商品名称、SKU等字段搜索
- 筛选器支持按商品状态、库存状态等条件筛选
- 批量操作按钮支持选择多个商品进行上下架或删除操作
- 导出按钮支持将当前筛选结果导出为CSV格式
- 导入按钮支持上传CSV文件批量导入商品

**ProductForm 组件** 提供功能强大的简单商品编辑界面，采用多标签页设计：
- 基本信息标签：商品名称、描述、SKU、商品类型等（仅显示简单商品和外部商品选项）
- 库存和定价标签：价格设置、库存管理等
- 图片管理区域：仅在 WordPress 认证时可用，支持图片上传和管理

对于变体商品和组合商品选项，将在下拉菜单中显示但设置为禁用状态，并标注"待开发"。

**图片上传限制设计**：
为了防止用户随意上传不符合要求的图片，系统将实施以下限制：
- 文件格式限制：仅允许上传 JPG、JPEG、PNG、GIF 格式的图片
- 文件大小限制：单张图片大小不得超过 5MB
- 图片尺寸限制：图片分辨率不得超过 4000x4000 像素
- 上传数量限制：每次最多可同时上传 10 张图片
- 错误提示：当用户尝试上传不符合要求的文件时，会显示清晰的错误提示信息

**批量导入/导出功能设计**：
- **导出功能**：用户可以将当前筛选的商品数据导出为标准 CSV 格式文件，包含所有商品字段
- **导入功能**：用户可以上传符合标准格式的 CSV 文件批量导入商品数据
- **导入导出数量限制**：单次导入/导出最多支持100个商品，此限制基于WooCommerce REST API的默认限制
- **格式验证**：导入时会对文件格式和数据有效性进行验证，确保数据完整性
- **预览确认**：导入前提供数据预览功能，用户可确认即将导入的数据
- **导入结果反馈**：导入完成后显示详细的结果报告，包括成功导入和失败记录的数量及详情
- **超量处理**：当用户尝试导入超过100个商品的CSV文件时，系统会提示分批处理，并显示具体数量限制信息

#### 3.2.4 数据结构
```typescript
interface Product {
  id?: number
  name: string
  description: string
  shortDescription?: string
  price: number
  regularPrice: number
  salePrice?: number
  sku: string
  stockQuantity: number
  manageStock: boolean
  stockStatus: 'instock' | 'outofstock' | 'onbackorder'
  categories: ProductCategory[]
  tags: ProductTag[]
  images: ProductImage[]
  status: 'draft' | 'pending' | 'private' | 'publish'
  type: 'simple' | 'grouped' | 'external' | 'variable'
}
```

### 3.3 订单提醒模块

#### 3.3.1 功能描述
- 轻量级订单提醒功能，仅用于通知新订单
- 在 Chrome 扩展图标上显示红点和订单数量
- 订单数量大于 99 时显示 "99+"
- 点击订单模块直接跳转到绑定店铺的 WooCommerce 订单页面
- 订单提醒功能可开关，默认关闭，用户可根据需要开启

#### 3.3.2 设计理念
订单提醒功能遵循轻量级设计原则：
1. **简单提醒**: 仅提供新订单通知，不包含详细订单管理
2. **视觉提示**: 通过红点和数字直观显示未处理订单数量
3. **快速跳转**: 一键跳转到 WooCommerce 后台订单页面
4. **专注核心**: 让用户专注于商品编辑，订单处理交由专业 ERP 系统

#### 3.3.3 组件设计
**OrderNotification 组件** 负责订单提醒功能：
- 定时检查绑定店铺的新订单数量
- 更新扩展图标上的徽章显示
- 提供订单模块入口，点击后跳转到 WooCommerce 订单页面
- 提供订单提醒开关设置，默认关闭

**订单提醒优化机制**：
为了减少资源占用和避免频繁查询订单，系统将采用以下优化策略：
1. **默认关闭**：订单提醒功能默认处于关闭状态，用户需要手动开启
2. **智能定时检查**：开启后，默认每15分钟检查一次订单状态，避免频繁请求
3. **最小化查询**：只查询最近1小时内的新订单，减少数据传输量
4. **增量更新**：记录上次检查时间，只查询新增订单
5. **批量处理**：当有多个店铺时，合并查询请求以减少API调用次数
6. **错误处理**：网络异常或API错误时自动降级，不影响主功能

#### 3.3.4 数据结构
```typescript
interface OrderNotification {
  storeId: string
  unreadCount: number
  lastChecked: string
}
```

### 3.3 国际化支持

#### 3.3.1 支持语言
- 简体中文 (zh-CN)
- 繁体中文 (zh-TW)
- 英文 (en-US)

#### 3.3.2 实现方案
- 自定义 `useTranslation` Hook 实现多语言支持
- 运行时语言切换功能
- 类型安全的翻译键定义

## 4. UI/UX 设计

### 4.1 设计原则
- 简洁直观的界面设计
- 清晰的功能模块划分
- 一致的交互模式
- 响应式布局适配
- 自适应设计支持

### 4.2 主要界面

#### 4.2.1 店铺管理界面
- 店铺列表展示
- 店铺状态指示（在线/离线）
- 添加/编辑店铺表单
- 认证方式选择

#### 4.2.2 商品管理界面
- 商品列表（表格形式）
- 搜索和筛选区域
- 批量操作按钮
- 商品编辑表单（多标签页设计）

#### 4.2.3 商品编辑界面
- 基本信息标签页
- 库存和定价标签页
- 图片管理区域（仅 WordPress 认证可用）

#### 4.2.4 最大化模式界面
- 主要工作界面，提供最大的工作区域
- 适合商品管理和编辑操作
- 响应式布局，充分利用屏幕空间
- 与弹窗模式共享相同的功能和数据

#### 4.2.5 自适应设计
- 支持不同屏幕尺寸的设备
- 根据窗口大小自动调整布局
- 在小屏幕设备上优化显示效果
- 确保在各种设备上都有良好的用户体验

## 5. 性能优化

### 5.1 构建优化
- 使用 Vite 提供快速的热重载开发体验
- 代码分割优化加载性能
- 图片资源压缩减少体积

### 5.2 运行时优化
- Zustand 轻量级状态管理
- 懒加载非关键组件
- 网络请求缓存机制
- 自适应布局优化
- 设备特性检测和适配

## 6. 构建与部署

### 6.1 开发环境
```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

### 6.2 生产构建
```bash
# 构建生产版本
npm run build
```

### 6.3 部署流程
1. 构建插件
2. 在 Chrome 扩展管理页面加载构建产物
3. 测试功能
4. 打包发布

## 6. 安全性考虑

### 6.1 数据安全
- 敏感信息不硬编码在前端
- 权限最小化原则
- 数据传输加密

### 6.2 内容安全策略
- 严格的内容安全策略(CSP)
- 防止跨站脚本攻击(XSS)

### 6.3 认证安全
- WordPress 应用密码认证提供更安全的访问方式
- WooCommerce REST API 认证信息安全存储
- 连接测试时避免暴露敏感信息

## 7. 开发者故事与插件初衷

### 7.1 背景
1984年出生的我，网络通讯专业毕业，一直在浙江嘉兴一家餐饮企业从事信息化维护工作。今年7月底，突如其来的裁员让我一度感到迷茫和失落。作为一名IT技术人员，我从未放弃对技术的热爱，平时喜欢喝茶、研究AI编程、风水和中医等传统文化。

我一直有个梦想，就是创办自己的外贸公司或电商公司，做跨境电商事业。这个梦想在我心中酝酿了很久，但一直缺乏一个合适的起点。在尝试搭建WooCommerce独立站时，我发现了一个痛点：缺乏便捷实用的ERP系统来管理商品。对于新手卖家来说，手动上传和管理商品既耗时又容易出错，这让很多有梦想的人望而却步。

更让人困扰的是，当商品上架后，很难及时知道是否有顾客下单。我需要不断登录后台查看订单，这严重影响了我专注于商品编辑和优化的工作。

### 7.2 动机
在失业的迷茫期，我开始开发 chrome-erp-woocommerce-v2 项目，最初只是为了满足自己的需求。但当我想到自己的经历，想到还有无数像我一样有梦想的新手卖家和创业者时，我决定将这个系统免费分享给大家。

在开发过程中，我发现原有系统虽然功能强大，但过于复杂和庞大，不够轻盈。许多用户只需要基本的商品管理功能，却被复杂的界面和众多功能所困扰。为了满足用户对轻量级、简洁工具的需求，我决定重新设计开发一个更加轻盈的插件——WooLite。

WooLite 专注于解决新手卖家的核心痛点：简单商品管理、及时订单提醒。它不是一个功能繁多的ERP系统，而是一个在你最需要帮助的时候，给你带来一点帮助的贴心工具。

### 7.3 挑战
开发过程中，我也曾感到迷茫和困惑。如何在保持功能实用性的同时做到极致简化？如何确保插件的稳定性和性能？这些问题一直困扰着我。但每当想到那些和我一样怀揣梦想的人，我就有了继续前进的动力。

正如茶叶需要时间沉淀才能散发醇香，这款插件也经过精心打磨。我坚持使用轻量级的技术栈，去除一切不必要的功能，专注于核心的商品管理需求。

### 7.4 愿景
WooLite 不是要成为一个功能繁杂的庞然大物，而是要做一个简单、实用、贴心的工具。就像一杯清茶，虽然简单，却能让人回味无穷。

我相信，每一个有梦想的人都值得被帮助。这个插件就是我送给所有跨境电商创业者的礼物，希望它能成为大家实现梦想路上的助力器。当你的商品出单后，你就需要更加专业的ERP系统来支持，而WooLite也就完成了它的核心使命——在你最需要帮助的时候，给你带来了一点帮助。

*"让跨境电商管理变得简单高效，为千万小卖家点亮成功之路。"*

## 8. 未来发展方向

### 8.1 功能扩展
- 更丰富的商品筛选条件
- 导出商品数据为 CSV 格式
- 商品模板功能
- 批量导入商品功能
- 商品状态统计图表
- 变体商品管理功能（待开发）
- 组合商品管理功能（待开发）

*注：订单功能将始终保持轻量级提醒模式，不会发展为完整的订单管理系统，以确保插件的简洁性和专注性。*

### 8.2 性能优化
- 进一步减少插件体积
- 提升大数据量处理性能
- 优化网络请求效率
- 实现虚拟滚动加载大量商品

### 8.3 用户体验
- 更加个性化的界面定制
- 操作引导和帮助文档
- 键盘快捷键支持
- 深色模式支持
- 响应式设计优化